<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Flutteråˆè¯† | å®‹èˆª</title>
<meta name="description" content="ç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ" />
<link rel="shortcut icon" href="https://songhanghang.github.io/favicon.ico?v=1565269730389">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://songhanghang.github.io/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://songhanghang.github.io">
  <img class="avatar" src="https://songhanghang.github.io/images/avatar.png?v=1565269730389" alt="">
  </a>
  <h1 class="site-title">
    å®‹èˆª
  </h1>
  <p class="site-description">
    ç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/songhanghang" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Flutteråˆè¯†
            </h2>
            <div class="post-info">
              <span>
                2019-07-29
              </span>
              <span>
                7 min read
              </span>
              
                <a href="https://songhanghang.github.io/tag/mGh23E4z4" class="post-tag">
                  # Flutter
                </a>
              
                <a href="https://songhanghang.github.io/tag/YaO8HL_it" class="post-tag">
                  # Android
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://songhanghang.github.io/post-images/hello-gridea.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <blockquote>
<p>å‚è€ƒï¼š<br>
<a href="https://flutterchina.club/">Flutterä¸­æ–‡ç½‘: https://flutterchina.club</a><br>
<a href="https://book.flutterchina.club/">Flutterå®æˆ˜: https://book.flutterchina.club</a><br>
<a href="https://github.com/songhanghang/flutter_news_demo">Demo: https://github.com/songhanghang/flutter_news_demo</a></p>
</blockquote>
<h2 id="hybridç®€ä»‹">Hybridç®€ä»‹</h2>
<h3 id="h5-åŸç”Ÿ">H5 + åŸç”Ÿ</h3>
<p>WebViewæ¸²æŸ“ç•Œé¢ï¼Œæ€§èƒ½ä½“éªŒç›¸å¯¹Nativeè¾ƒå·®ã€‚</p>
<h3 id="jså¼€å‘-åŸç”Ÿ">JSå¼€å‘ + åŸç”Ÿ</h3>
<p>ä»£è¡¨æ¡†æ¶React Native, Weex, å¿«åº”ç”¨, åŸç†éƒ½æ˜¯JSå»æ˜ å°„ Android | IOS åŸç”Ÿæ§ä»¶ï¼ŒåŸç”Ÿæ¸²æŸ“é€Ÿåº¦å¿«äºH5ï¼Œå—é™äºJSè§£é‡Šæ‰§è¡Œï¼ŒåŠè°ƒç”¨æ¡¥å¼€é”€ï¼Œé€Ÿåº¦æ— æ³•è¿½èµ¶Nativeã€‚</p>
<h3 id="è‡ªç ”gui-åŸç”Ÿ">è‡ªç ”GUI + åŸç”Ÿ</h3>
<p>ä»£è¡¨æ¡†æ¶QT, Flutter, æ¸²æŸ“å¼•æ“ç›´æ¥å¯¹æ¥ä¸åŒå¹³å°ç³»ç»ŸAPI, å¯¹å¤–æä¾›ç»Ÿä¸€æ¥å£ï¼Œæ€§èƒ½å’ŒåŸç”Ÿæ¥è¿‘ï¼Œä½†æ˜¯åŠ¨æ€æ€§ä¸è¶³ï¼Œéœ€è¦ç¼–è¯‘å‘åŒ…ã€‚</p>
<blockquote>
<p>PSï¼šQTåœ¨æ¡Œé¢ç«¯åº”ç”¨æ¯”è¾ƒå¹¿æ³›ï¼Œä½†æ˜¯ç§»åŠ¨ç«¯å› å¼•æ“å¤§, C++å¼€å‘æ•ˆç‡ä½ï¼Œå‘å¤šï¼Œæ¨å‡ºå³å¤­æŠ˜ã€‚</p>
</blockquote>
<h2 id="flutterç™»åœº">Flutterç™»åœº</h2>
<p>Flutteræ˜¯Googleå‘å¸ƒçš„ä¸€ä¸ªç”¨äºåˆ›å»ºè·¨å¹³å°ã€é«˜æ€§èƒ½ç§»åŠ¨åº”ç”¨çš„æ¡†æ¶ã€‚Flutterå’ŒQT mobileä¸€æ ·ï¼Œéƒ½æ²¡æœ‰ä½¿ç”¨åŸç”Ÿæ§ä»¶ï¼Œç›¸åéƒ½å®ç°äº†ä¸€ä¸ªè‡ªç»˜å¼•æ“ï¼Œä½¿ç”¨è‡ªèº«çš„å¸ƒå±€ã€ç»˜åˆ¶ç³»ç»Ÿã€‚<br>
ä»¥ä¸‹æ˜¯å®˜ç½‘ä»‹ç»ï¼š</p>
<ol>
<li>
<p>å¿«é€Ÿå¼€å‘<br>
æ¯«ç§’çº§çš„çƒ­é‡è½½ï¼Œä¿®æ”¹åï¼Œæ‚¨çš„åº”ç”¨ç•Œé¢ä¼šç«‹å³æ›´æ–°ã€‚ä½¿ç”¨ä¸°å¯Œçš„ã€å®Œå…¨å¯å®šåˆ¶çš„widgetåœ¨å‡ åˆ†é’Ÿå†…æ„å»ºåŸç”Ÿç•Œé¢.</p>
</li>
<li>
<p>å¯Œæœ‰è¡¨ç°åŠ›å’Œçµæ´»çš„UI<br>
å¿«é€Ÿå‘å¸ƒèšç„¦äºåŸç”Ÿä½“éªŒçš„åŠŸèƒ½ã€‚åˆ†å±‚çš„æ¶æ„å…è®¸æ‚¨å®Œå…¨è‡ªå®šä¹‰ï¼Œä»è€Œå®ç°éš¾ä»¥ç½®ä¿¡çš„å¿«é€Ÿæ¸²æŸ“å’Œå¯Œæœ‰è¡¨ç°åŠ›ã€çµæ´»çš„è®¾è®¡ã€‚</p>
</li>
<li>
<p>åŸç”Ÿæ€§èƒ½<br>
FlutteråŒ…å«äº†è®¸å¤šæ ¸å¿ƒçš„widgetï¼Œå¦‚æ»šåŠ¨ã€å¯¼èˆªã€å›¾æ ‡å’Œå­—ä½“ç­‰ï¼Œè¿™äº›éƒ½å¯ä»¥åœ¨iOSå’ŒAndroidä¸Šè¾¾åˆ°åŸç”Ÿåº”ç”¨ä¸€æ ·çš„æ€§èƒ½ã€‚</p>
</li>
<li>
<p>è®¿é—®æœ¬åœ°åŠŸèƒ½å’ŒSDK<br>
é€šè¿‡å¹³å°ç›¸å…³çš„APIã€ç¬¬ä¸‰æ–¹SDKå’ŒåŸç”Ÿä»£ç è®©æ‚¨çš„åº”ç”¨å˜å¾—å¼ºå¤§æ˜“ç”¨ã€‚ Flutterå…è®¸æ‚¨å¤ç”¨ç°æœ‰çš„Javaã€Swiftæˆ–ObjCä»£ç ï¼Œè®¿é—®iOSå’ŒAndroidä¸Šçš„åŸç”Ÿç³»ç»ŸåŠŸèƒ½å’Œç³»ç»ŸSDKã€‚</p>
</li>
</ol>
<h2 id="flutteræ€æƒ³">Flutteræ€æƒ³</h2>
<h3 id="ç»„åˆ-é›†æˆ">ç»„åˆ &gt; é›†æˆ</h3>
<p>åœ¨Flutterä¸­ä¸€åˆ‡UIç›¸å…³æ“ä½œéƒ½æ˜¯Widgetï¼Œå¸ƒå±€ï¼Œå®¹å™¨ï¼Œæ‰‹åŠ¿ï¼Œæ»‘åŠ¨ï¼ŒåŠŸèƒ½éƒ½æ˜¯Widget, é€šè¿‡è‡ªç”±ç»„åˆè¿™äº›Widgetæ¥æ­å»ºåŠŸèƒ½ç•Œé¢ã€‚</p>
<h3 id="å“åº”å¼ç¼–ç¨‹">å“åº”å¼ç¼–ç¨‹</h3>
<p>å“åº”å¼ç¼–ç¨‹ä¸€å¥è¯æ€»ç»“å°±æ˜¯<code>æ•°æ®çŠ¶æ€æ”¹å˜åˆ™UIéšä¹‹è‡ªåŠ¨æ”¹å˜</code>ï¼ŒReact Nativeå’ŒDataBindingéƒ½æ˜¯è¯¥æ€æƒ³äº§ç‰©ï¼Œ åœ¨Flutterä¸­è¡¨ç°çš„æ›´åŠ æ·‹æ¼“å°½è‡´ã€‚æ•°æ®æ”¹å˜æ—¶é€šè¿‡setState() {}, é€šçŸ¥Flutter Frameworkæ‰§è¡ŒRebuild Widget -&gt; Update Element -&gt; Render UIã€‚</p>
<h2 id="flutteræ ¸å¿ƒåŸç†">Flutteræ ¸å¿ƒåŸç†</h2>
<h3 id="æ¡†æ¶åˆ†å±‚">æ¡†æ¶åˆ†å±‚</h3>
<p>Flutteræ¡†æ¶æ˜¯ä¸€ä¸ªåˆ†å±‚çš„ç»“æ„ï¼Œæ¯ä¸ªå±‚éƒ½å»ºç«‹åœ¨å‰ä¸€å±‚ä¹‹ä¸Šã€‚ä½¿ç”¨Skiaæ¸²æŸ“å¼•æ“ï¼Œå› Androidè‡ªå¸¦Skia, æ‰€ä»¥æ‰“åŒ…Androidä¸åŒ…å«Skia, è¿™ä¹Ÿæ˜¯IOSä½“ç§¯è¾ƒå¤§çš„é‡è¦åŸå› ã€‚<br>
<img src="https://wx4.sinaimg.cn/mw690/006292TQly1g48yigwv61j30yu0iyq7m.jpg" alt=""></p>
<h3 id="æ¸²æŸ“æµç¨‹">æ¸²æŸ“æµç¨‹</h3>
<p><img src="https://upload-images.jianshu.io/upload_images/5639324-4424415ff5f8681f.jpg?imageMogr2/auto-orient/" alt=""></p>
<h3 id="ä¸‰æ£µç¥æ ‘">ä¸‰æ£µç¥æ ‘</h3>
<p><img src="https://upload-images.jianshu.io/upload_images/5639324-611c58af9c948150.jpg" alt=""><br>
æ‰€æœ‰æ•…äº‹ï¼Œä»è¿™ä¸ªä¸‰æ£µæ ‘å¼€å§‹...<br>
è¿™ä¸‰é¢—ğŸŒ²åˆ†åˆ«æ˜¯ Widget Tree, Element Tree, RenderObject Tree.</p>
<h4 id="ç¬¬ä¸€é¢—widget">ç¬¬ä¸€é¢—WidgetğŸŒ²</h4>
<pre><code class="language-dart">/// Describes the configuration for an [Element].
abstract class Widget extends DiagnosticableTree {
  /// Initializes [key] for subclasses.
  const Widget({ this.key });
  final Key key;
  
  @protected
  Element createElement();

  /// A short, textual description of this widget.
  @override
  String toStringShort() {
    return key == null ? '$runtimeType' : '$runtimeType-$key';
  }

  @override
  void debugFillProperties(DiagnosticPropertiesBuilder properties) {
    super.debugFillProperties(properties);
    properties.defaultDiagnosticsTreeStyle = DiagnosticsTreeStyle.dense;
  }

  /// Whether the `newWidget` can be used to update an [Element] that currently
  static bool canUpdate(Widget oldWidget, Widget newWidget) {
    return oldWidget.runtimeType == newWidget.runtimeType
        &amp;&amp; oldWidget.key == newWidget.key;
  }
}
</code></pre>
<p>Widgetæºç æ³¨é‡Š <code>Describes the configuration for an [Element].</code><br>
Widgetä½œç”¨å°±æ˜¯ä¸ºElementæè¿°éœ€è¦çš„é…ç½®ï¼Œ è´Ÿè´£åˆ›å»ºElement -&gt; <code>createElement()</code>, ä»¥åŠå†³å®šElementæ˜¯å¦éœ€è¦æ›´æ–° -&gt; <code>canUpdate(Widget oldWidget, Widget newWidget)</code>.<br>
Flutter Frameworké€šè¿‡diffç®—æ³•æ¯”å¯¹Widgetæ ‘å˜åŒ–ï¼Œç„¶åå†³å®šElementçš„Stateæ”¹å˜ã€‚Rebuildåçš„Widgetæ ‘ï¼Œå¦‚æœå¯¹æ¯”æœªå‘ç”Ÿæ”¹å˜ï¼Œ åˆ™Elementä¸ä¼šè§¦å‘é‡ç»˜ï¼Œè¿™å°±æ„å‘³ç€Widgetæ ‘çš„é‡å»ºå¹¶ä¸ä¼šç›´æ¥å¯¼è‡´Elementæ ‘é‡å»ºã€‚</p>
<h4 id="ç¬¬äºŒé¢—element">ç¬¬äºŒé¢—ElementğŸŒ²</h4>
<pre><code class="language-dart">/// An instantiation of a [Widget] at a particular location in the tree.
abstract class Element extends DiagnosticableTree implements BuildContext {
...
  /// The configuration for this element.
  @override
  Widget get widget =&gt; _widget;
  Widget _widget;
  
  /// The render object at (or below) this location in the tree.
  RenderObject get renderObject {
    ...
  }
...
}
</code></pre>
<p>Elementæºç æ³¨é‡Šï¼š <code>An instantiation of a [Widget] at a particular location in the tree.</code><br>
Elementè¡¨ç¤ºWidgeté…ç½®æ ‘ç‰¹å®šä½ç½®çš„ä¸€ä¸ªå®ä¾‹ã€‚æŒæœ‰Widgetå’ŒRenderObject,è´Ÿè´£ç»„ç»‡ç®¡ç†Widgeté…ç½®å’ŒRenderObjectæ¸²æŸ“ã€‚<br>
å¯ä»¥ç†è§£ä¸ºAndroidå’ŒIOSçš„Viewæ ‘ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ElementçŠ¶æ€ä¸€èˆ¬ç”±Flutter Frameworkç®¡ç†ï¼Œ å¼€å‘è€…åªéœ€è´Ÿè´£æ›´æ”¹Widgetå³å¯ã€‚</p>
<h4 id="ç¬¬ä¸‰é¢—renderobject">ç¬¬ä¸‰é¢—RenderObjectğŸŒ²</h4>
<pre><code class="language-dart">/// An object in the render tree.
abstract class RenderObject extends AbstractNode with DiagnosticableTreeMixin implements HitTestTarget {
  ...
  @protected
  void performResize();

  @protected
  void performLayout();

  void paint(PaintingContext context, Offset offset);
  ...
</code></pre>
<p>RenderObjectæºç æ³¨é‡Šï¼š  <code>An object in the render tree.</code><br>
RenderObjectè¡¨ç¤ºä¸ºæ¸²æŸ“æ ‘çš„ä¸€ä¸ªå¯¹è±¡<br>
é¡¾åæ€ä¹‰ï¼ŒRenderObjectè´Ÿè´£çœŸæ­£çš„æ¸²æŸ“å·¥ä½œï¼Œéœ€è¦è‡ªå·±å®šä¹‰ç»˜åˆ¶çš„è¯å°±è¦ä»æ­¤å¤„åˆ‡å…¥, æµ‹é‡å¤§å° <code>performResize</code>ï¼Œå®šä½ä½ç½® <code>performLayout</code>ï¼Œ ç»˜åˆ¶ <code>paint</code>éƒ½ç”±RenderObjectå®Œæˆã€‚</p>
<h4 id="æ€»ç»“">æ€»ç»“</h4>
<p>Widgetä¸ºé…ç½®æ ‘ï¼Œ Elementä¸ºUIæ§åˆ¶æ ‘ï¼ŒRenderObjectä¸ºç»˜åˆ¶æ ‘ã€‚å¼€å‘è€…ç»„åˆWidgeté…ç½®ï¼ŒFrameworké€šè¿‡æ¯”å¯¹Widgeté…ç½®æ¥åˆ›æ–°æˆ–æ›´æ–°Elementï¼Œæœ€åè°ƒåº¦RenderObjectæ¸²æŸ“æ ‘è¿›è¡Œä¸Šå±ç»˜åˆ¶ã€‚</p>
<h2 id="widget-ç§ç±»">Widget ç§ç±»</h2>
<p>Widgetæœ¬èº«é€šå¸¸ç”±è®¸å¤šæ›´å°çš„ã€å•ä¸€ç”¨é€”widgetç»„æˆï¼Œè¿™äº›widgetç»“åˆèµ·æ¥äº§ç”Ÿå¼ºå¤§çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼ŒContaineræ˜¯ä¸€ä¸ªå¸¸ç”¨çš„Widgetï¼Œ ç”±å¤šä¸ªWidgetç»„æˆï¼Œè¿™äº›widgetè´Ÿè´£å¸ƒå±€ã€ç»˜åˆ¶ã€å®šä½å’Œè°ƒæ•´å¤§å°ã€‚å…·ä½“æ¥è¯´ï¼ŒContainerç”± LimitedBoxã€ ConstrainedBoxã€ Alignã€ Paddingã€ DecoratedBoxã€ å’ŒTransformç»„æˆã€‚ æ‚¨å¯ä»¥ç”¨å„ç§æ–¹å¼ç»„åˆè¿™äº›ä»¥åŠå…¶ä»–ç®€å•çš„Widgetï¼Œè€Œä¸æ˜¯ç»§æ‰¿å®¹å™¨ã€‚</p>
<p>ç±»å±‚æ¬¡ç»“æ„å¾ˆæµ…ä¸”å¾ˆå®½ï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°å¢åŠ å¯èƒ½çš„ç»„åˆæ•°é‡ã€‚<br>
<img src="https://wx1.sinaimg.cn/mw690/006292TQly1g48yigwyf5j315u0nwq58.jpg" alt=""></p>
<h3 id="stateless-widget">Stateless Widget</h3>
<p>æ— çŠ¶æ€Widget, ä½¿ç”¨äºä¸éœ€è¦ç»´æŠ¤çŠ¶æ€çš„åœºæ™¯ï¼Œå³åˆ›å»ºåä¸å¯ä¿®æ”¹é…ç½®æ•°æ®ã€‚</p>
<pre><code class="language-dart">abstract class StatelessWidget extends Widget {
  const StatelessWidget({ Key key }) : super(key: key);

  @override
  StatelessElement createElement() =&gt; StatelessElement(this);
  
  @protected
  Widget build(BuildContext context);
}
</code></pre>
<p>å¯¹åº”StatelessElementï¼Œ å…¶ä¸­BuildContextå³ä¸ºå¯¹åº”çš„Elementå®ä¾‹ã€‚</p>
<h3 id="statefulwidget">StatefulWidget</h3>
<p><img src="https://wx1.sinaimg.cn/mw690/006292TQly1g48yigw7ebj30zk0i4abe.jpg" alt="-w640"></p>
<p>æœ‰çŠ¶æ€widget, é€šè¿‡setState(), å¯ä»¥è§¦å‘rebuild Widget, ä»è€Œåˆ·æ–°ç•Œé¢ã€‚<br>
é€‚ç”¨äºæ•°æ®æ”¹å˜éœ€è¦åˆ·æ–°ç•Œé¢çš„åœºæ™¯ã€‚</p>
<pre><code class="language-dart">abstract class StatefulWidget extends Widget {
  const StatefulWidget({ Key key }) : super(key: key);

  @override
  StatefulElement createElement() =&gt; new StatefulElement(this);

  @protected
  State createState();
}

class StatefulElement extends ComponentElement {
  StatefulElement(StatefulWidget widget)
      : _state = widget.createState(),
        super(widget) {
       }());
    assert(_state._element == null);
    _state._element = this;
    assert(_state._widget == null);
    _state._widget = widget;
    assert(_state._debugLifecycleState == _StateLifecycle.created);
  }
}

</code></pre>
<p>å¯¹åº”StatefulElementï¼Œ Stateåœ¨StatefulElementåˆå§‹åŒ–æ—¶åˆ›å»ºï¼Œ Stateå’ŒStatefulElementç›¸äº’æŒæœ‰ï¼Œæ„å‘³ç€Stateä¸ä¼šéšç€StatefulWidgeté‡å»º, StateæŒæœ‰StatefulWidget.</p>
<pre><code class="language-dart">class _PageWidgetState extends State&lt;_PageWidget&gt; {
  final GlobalKey&lt;RefreshIndicatorState&gt; _refreshIndicatorKey =
      GlobalKey&lt;RefreshIndicatorState&gt;();

  @override
  void initState() {
    super.initState();
    _refreshData();
  }

  Future _refreshData() async {
    Response response = await widget.page._request();
    setState(() {});
    return response;
  }

  @override
  Widget build(BuildContext context) {
    return RefreshIndicator(
      key: _refreshIndicatorKey,
      onRefresh: _refreshData,
    
      ...
    );
  }
</code></pre>
<p>Stateé€šè¿‡setState(), è§¦å‘Rebuild.</p>
<h2 id="ä¾èµ–ç®¡ç†">ä¾èµ–ç®¡ç†</h2>
<p>ä½¿ç”¨pubspec.yamlç®¡ç†ä¾èµ–ï¼Œç±»ä¼¼äºAndroid Gradle, IOS Cocoapods.<br>
<strong>eg:</strong></p>
<pre><code>name: flutter_in_action
description: First Flutter application.

version: 1.0.0+1

dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^0.1.2

dev_dependencies:
  flutter_test:
    sdk: flutter

flutter:
  uses-material-design: true
</code></pre>
<h2 id="èµ„æºç®¡ç†">èµ„æºç®¡ç†</h2>
<p>Flutteråº”ç”¨ç¨‹åºå¯ä»¥åŒ…å«ä»£ç å’Œ assetsï¼ˆæœ‰æ—¶ç§°ä¸ºèµ„æºï¼‰ã€‚assetsæ˜¯ä¼šæ‰“åŒ…åˆ°ç¨‹åºå®‰è£…åŒ…ä¸­çš„ï¼Œå¯åœ¨è¿è¡Œæ—¶è®¿é—®ã€‚å¸¸è§ç±»å‹çš„assetsåŒ…æ‹¬é™æ€æ•°æ®ï¼ˆä¾‹å¦‚JSONæ–‡ä»¶ï¼‰ã€é…ç½®æ–‡ä»¶ã€å›¾æ ‡å’Œå›¾ç‰‡ï¼ˆJPEGï¼ŒWebPï¼ŒGIFï¼ŒåŠ¨ç”»WebP / GIFï¼ŒPNGï¼ŒBMPå’ŒWBMPï¼‰ç­‰ã€‚<br>
Flutterä¹Ÿä½¿ç”¨pubspec.yamlæ–‡ä»¶æ¥ç®¡ç†åº”ç”¨ç¨‹åºæ‰€éœ€çš„èµ„æº</p>
<pre><code>  flutter:
  assets:
    - assets/my_icon.png
    - assets/background.png
</code></pre>
<h2 id="å¼€å‘å·¥å…·">å¼€å‘å·¥å…·</h2>
<p>å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨<br>
ç¯å¢ƒé…ç½®ç•¥è¿‡...</p>
<h3 id="ideæ’ä»¶">IDEæ’ä»¶</h3>
<p>Flutteræä¾›Android Studioå’ŒVS Codeæ’ä»¶ï¼Œè¿™é‡Œåªçœ‹Android Studio. éœ€ä¸‹è½½flutterå’Œdartæ’ä»¶, å®‰è£…åå¦‚å›¾<br>
<img src="https://wx2.sinaimg.cn/mw1024/006292TQly1g48yih40xgj30u00ym1kx.jpg" alt="-w1148"></p>
<h3 id="codeæ‰“å¼€">Codeæ‰“å¼€</h3>
<p>è¿˜æœ‰ä¸€äº›å·¥å…·éœ€è¦é€šè¿‡ä»£ç æ‰“å¼€ã€‚</p>
<pre><code class="language-dart">void main() {
    debugPaintSizeEnabled = true; // æ˜¾ç¤ºæ–‡å­—åŸºå‡†çº¿
    debugPaintPointersEnabled = true; // çªå‡ºç‚¹å‡»å¯¹è±¡
    debugPaintLayerBordersEnabled = true; // æ˜¾ç¤ºå±‚çº§è¾¹ç•Œ
    debugRepaintRainbowEnabled = true; // æ˜¾ç¤ºé‡ç»˜
    runApp(MyApp());
}
</code></pre>
<h3 id="ä¸€äº›æœ‰æ„æ€çš„å·¥å…·">ä¸€äº›æœ‰æ„æ€çš„å·¥å…·</h3>
<h4 id="select-widget-mode">Select Widget Mode</h4>
<p>æ»‘åŠ¨æ—¶æ˜¾ç¤ºè§¦æ‘¸åŒºåŸŸå¯¹åº”çš„Widgetç±»å‹ã€‚</p>
<p><img src="https://wx2.sinaimg.cn/mw690/006292TQly1g491cv5nf9g30a80fl7wl.gif" alt=""></p>
<h4 id="refresh-widget-info">Refresh Widget Info</h4>
<p>åˆ·æ–° rebuild widgetã€‚</p>
<h4 id="show-performance-overlay">Show Performance Overlay</h4>
<p>æ˜¾ç¤ºæ¯å¸§GPUç»˜åˆ¶æ—¶é—´ï¼Œå’ŒUIç»˜åˆ¶æ—¶é—´ï¼Œåˆ†åˆ«æ˜¾ç¤ºå•å¸§æœ€å¤§ç»˜åˆ¶æ—¶é—´å’Œå¹³å‡ç»˜åˆ¶æ—¶é—´ï¼Œdebugæ¨¡å¼JITè¾¹è§£é‡Šè¾¹æ‰§è¡Œå¯¼è‡´UIä¸èƒ½è·‘æ…¢60å¸§æ¯ç§’ã€‚</p>
<p><img src="https://wx2.sinaimg.cn/mw690/006292TQly1g491nqk44og30ah0ilqv8.gif" alt=""></p>
<h4 id="toggle-platform">Toggle Platform</h4>
<p>åˆ‡æ¢Androidå’ŒIOSå¹³å°, æ³¨æ„ä¸åªæ˜¯TitleBaræ˜¾ç¤ºæ•ˆæœä¸åŒï¼Œè½¬åœºåŠ¨ç”»ä¹Ÿä¸ç›¸åŒã€‚</p>
<p><img src="https://wx1.sinaimg.cn/mw690/006292TQly1g4920glkqhg309r0hbe84.gif" alt=""></p>
<p><img src="https://wx3.sinaimg.cn/mw690/006292TQly1g4920i5z51g30a40hykjo.gif" alt=""></p>
<h4 id="show-debug-paint">Show Debug Paint</h4>
<p>æ˜¾ç¤ºViewè¾¹æ¡†</p>
<p><img src="https://wx1.sinaimg.cn/mw690/006292TQly1g492agwkb1j30am0ixqbm.jpg" alt=""></p>
<h4 id="show-paint-baselines">Show Paint Baselines</h4>
<p>æ˜¾ç¤ºTextåŸºå‡†çº¿</p>
<p><img src="https://wx1.sinaimg.cn/mw690/006292TQly1g492cebm1pj30am0ixagj.jpg" alt=""></p>
<h4 id="debugpaintpointersenabled">debugPaintPointersEnabled</h4>
<p>æ˜¾ç¤ºçªå‡ºå¯¹è±¡</p>
<p><img src="https://wx3.sinaimg.cn/mw690/006292TQly1g492kv7r98j30am0ix43o.jpg" alt=""></p>
<h4 id="debugpaintlayerbordersenabled">debugPaintLayerBordersEnabled</h4>
<p>æ˜¾ç¤ºå±‚çº§è¾¹ç•Œ</p>
<p><img src="https://wx3.sinaimg.cn/mw690/006292TQly1g492n56azoj30am0ixn3a.jpg" alt=""></p>
<h4 id="debugrepaintrainbowenabled">debugRepaintRainbowEnabled</h4>
<p>æ˜¾ç¤ºé‡ç»˜</p>
<p><img src="https://wx2.sinaimg.cn/mw690/006292TQly1g492qil7dwg30a40hy7wj.gif" alt=""></p>
<h2 id="å¼€æºåº“æ”¯æŒ">å¼€æºåº“æ”¯æŒ</h2>
<p><a href="https://pub.dev/flutter">https://pub.dev/flutter</a><br>
<img src="https://wx1.sinaimg.cn/mw690/006292TQly1g4c115fuhaj30u01144ky.jpg" alt=""><br>
Flutterå·²æœ‰å¾ˆå¤šé«˜è´¨é‡çš„å¼€æºåº“ï¼Œæ¶µç›–å¸¸ç”¨çš„ç½‘ç»œè¯·æ±‚ï¼Œæ•°æ®åº“ï¼Œå›¾ç‰‡å¤„ç†ï¼Œå›¾ç‰‡é€‰æ‹©å™¨ï¼Œåœ°å›¾ï¼Œæ”¯ä»˜ï¼ŒWebView ï¼Œè·¯ç”±ï¼Œshared_preferencesç­‰ç­‰ã€‚å„å¤§å‚ä¹Ÿåœ¨ç§¯æçš„æ¨è¿›Flutter, ç›¸ä¿¡æœªæ¥Flutterå¼€å‘ä¼šæ›´ç®€å•å’Œå¿«é€Ÿã€‚</p>
<h2 id="æ€»ç»“-2">æ€»ç»“</h2>
<pre><code>Makes it easy and fast to build beautiful mobile apps
for iOS and Android.
</code></pre>
<p>Fultterå¼€å‘å¾ˆåƒæ˜¯ç§¯æœ¨æ¸¸æˆï¼ŒåŠŸèƒ½ä¸°å¯Œçš„ç»„ä»¶ï¼Œèƒ½è®©ä½ ç®€å•å¿«é€Ÿçš„æ­å»ºæ¼‚äº®ä¸”é«˜æ€§èƒ½çš„Appã€‚ç°åœ¨å„å¤§å‚éƒ½æœ‰Flutterå°è¯•ï¼Œé—²é±¼å·²ç»åœ¨ç”Ÿäº§ç¯å¢ƒç©å¾ˆä¹…ï¼Œåä¸ºçš„é¸¿è’™ç³»ç»Ÿæ›´æ˜¯ç›´æ¥é›†æˆäº†Flutterç¯å¢ƒï¼Œç‡åŸä¹‹åŠ¿å·²èµ·ã€‚</p>
<p>åç»­Flutterå¦‚æœèƒ½é¡ºåˆ©æ¨è¿›Web, MacOS, Linux, Windowæ”¯æŒï¼Œç›¸ä¿¡ä¸€é—¨è¯­è¨€èµ°å¤©ä¸‹çš„é‚£ä¸€å¤©å°±è¦æ¥äº†...</p>
<h2 id="demo-æ–°é—»å®¢æˆ·ç«¯">DEMO æ–°é—»å®¢æˆ·ç«¯</h2>
<p><a href="https://github.com/songhanghang/flutter_news_demo"><strong>https://github.com/songhanghang/flutter_news_demo</strong></a></p>
<p><img src="https://wx2.sinaimg.cn/mw690/006292TQly1g3v1ygaisdg30dc0np1l0.gif" alt="gif"></p>
<p>æºç ï¼š</p>
<pre><code class="language-dart">import 'dart:async';
import 'dart:convert';

import 'package:flutter/material.dart';
import 'package:flutter/rendering.dart';
import 'package:dio/dio.dart';
import 'package:flutter_webview_plugin/flutter_webview_plugin.dart';

Dio dio = Dio();

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: ScrollableTabsDemo(),
    );
  }
}

class _Page {
  _Page({this.text, this.key})
      : this.url = &quot;https://3g.163.com/touch/reconstruct/article/list/$key/0-20.html&quot;;
  final String text;
  final String key;
  final String url;
  final List&lt;_News&gt; list = List();

  Future _request() async {
    Response response = await dio.get(url);
    String value = response.toString();
    value = value.substring(9, value.length - 1);
    Map&lt;String, dynamic&gt; map = json.decode(value);
    List data = map[key];
    list.clear();
    data.forEach((value) {
      list.add(_News.fromJson(value));
    });
    return response;
  }
}

class _News {
  final String title;
  final String url;
  final String skpUrl;
  final String image;
  final String digest;
  final String time;

  _News.fromJson(Map&lt;String, dynamic&gt; json)
      : title = json[&quot;title&quot;],
        url = json[&quot;url&quot;],
        skpUrl = json[&quot;skipURL&quot;],
        image = json[&quot;imgsrc&quot;],
        digest = json[&quot;digest&quot;],
        time = json[&quot;ptime&quot;];
}

List&lt;_Page&gt; _allPages = &lt;_Page&gt;[
  _Page(text: 'æ–°é—»', key: &quot;BBM54PGAwangning&quot;),
  _Page(text: 'å¨±ä¹', key: &quot;BA10TA81wangning&quot;),
  _Page(text: 'ä½“è‚²', key: &quot;BA8E6OEOwangning&quot;),
  _Page(text: 'è´¢ç»', key: &quot;BA8EE5GMwangning&quot;),
  _Page(text: 'å†›äº‹', key: &quot;BAI67OGGwangning&quot;),
  _Page(text: 'ç§‘æŠ€', key: &quot;BA8D4A3Rwangning&quot;),
  _Page(text: 'æ‰‹æœº', key: &quot;BAI6I0O5wangning&quot;),
  _Page(text: 'æ•°ç ', key: &quot;BAI6JOD9wangning&quot;),
  _Page(text: 'æ—¶å°š', key: &quot;BA8F6ICNwangning&quot;),
  _Page(text: 'æ¸¸æˆ', key: &quot;BAI6RHDKwangning&quot;),
  _Page(text: 'æ•™è‚²', key: &quot;BA8FF5PRwangning&quot;),
  _Page(text: 'å¥åº·', key: &quot;BDC4QSV3wangning&quot;),
  _Page(text: 'æ—…æ¸¸', key: &quot;BEO4GINLwangning&quot;),
];

class ScrollableTabsDemo extends StatefulWidget {
  @override
  _ScrollableTabsState createState() =&gt; _ScrollableTabsState();
}

class _ScrollableTabsState extends State&lt;ScrollableTabsDemo&gt;
    with SingleTickerProviderStateMixin {
  TabController _controller;

  @override
  void initState() {
    super.initState();
    _controller = TabController(vsync: this, length: _allPages.length);
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  Decoration _getIndicator() {
    return ShapeDecoration(
      shape: const RoundedRectangleBorder(
            borderRadius: BorderRadius.all(Radius.circular(8.0)),
            side: BorderSide(color: Colors.white70, width: 1.5),
          ) +
          const RoundedRectangleBorder(
            borderRadius: BorderRadius.all(Radius.circular(4.0)),
            side: BorderSide(color: Colors.transparent, width: 8.0),
          ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: NestedScrollView(
        headerSliverBuilder: (BuildContext context, bool innerBoxIsScrolled) {
          return &lt;Widget&gt;[
            SliverOverlapAbsorber(
              handle: NestedScrollView.sliverOverlapAbsorberHandleFor(context),
              child: SliverAppBar(
                title: const Text('News'),
                pinned: false,
                backgroundColor: Colors.red,
                forceElevated: innerBoxIsScrolled,
                bottom: TabBar(
                  controller: _controller,
                  isScrollable: true,
                  labelColor: Colors.white,
                  indicator: _getIndicator(),
                  tabs: _allPages.map&lt;Tab&gt;((_Page page) {
                    return Tab(text: page.text);
                  }).toList(),
                ),
              ),
            ),
          ];
        },
        body: TabBarView(
          controller: _controller,
          children: _allPages.map&lt;Widget&gt;((_Page page) {
            return SafeArea(
              top: false,
              bottom: true,
              child: _PageWidget(page),
            );
          }).toList(),
        ),
      ),
    );
  }
}

class _PageWidget extends StatefulWidget {
  const _PageWidget(this.page, {Key key}) : super(key: key);
  final _Page page;

  @override
  State&lt;StatefulWidget&gt; createState() {
    return _PageWidgetState();
  }
}

class _PageWidgetState extends State&lt;_PageWidget&gt; {
  final GlobalKey&lt;RefreshIndicatorState&gt; _refreshIndicatorKey =
      GlobalKey&lt;RefreshIndicatorState&gt;();

  @override
  void initState() {
    super.initState();
    _refreshData();
  }

  Future _refreshData() async {
    Response response = await widget.page._request();
    setState(() {});
    return response;
  }

  @override
  Widget build(BuildContext context) {
    return RefreshIndicator(
      key: _refreshIndicatorKey,
      onRefresh: _refreshData,
      child: Scrollbar(
        child: ListView.builder(
          padding: kMaterialListPadding,
          itemCount: widget.page.list.length,
          itemBuilder: (BuildContext context, int index) {
            return GestureDetector(
              onTap: () {
                Navigator.push(context, MaterialPageRoute(builder: (context) {
                  String url = widget.page.list[index].url;
                  if (!url.startsWith(&quot;http&quot;)) {
                    url = widget.page.list[index].skpUrl;
                  }
                  return WebviewScaffold(
                      appBar: AppBar(title: Text(&quot;è¯¦æƒ…&quot;), backgroundColor: Colors.red),
                      url: url);
                }));
              },
              child: Padding(
                  padding: EdgeInsets.all(8.0),
                  child: Row(
                    children: &lt;Widget&gt;[
                      DecoratedBox(
                        decoration: BoxDecoration(
                            borderRadius: BorderRadius.circular(3.0),
                            boxShadow: [
                              BoxShadow(
                                  color: Colors.black54,
                                  offset: Offset(2.0, 2.0),
                                  blurRadius: 4.0)
                            ]),
                        child: Image.network(
                          widget.page.list[index].image,
                          width: 140,
                          height: 80,
                          fit: BoxFit.cover,
                        ),
                      ),
                      Expanded(
                          flex: 1,
                          child: Padding(
                              padding: EdgeInsets.only(left: 10),
                              child: Align(
                                  alignment: Alignment.centerLeft,
                                  child: Wrap(
                                    children: &lt;Widget&gt;[
                                      Text(widget.page.list[index].title),
                                      Text(
                                        widget.page.list[index].digest,
                                        style: TextStyle(
                                            color: Colors.black87,
                                            fontSize: 10.0),
                                      ),
                                      Text(
                                        widget.page.list[index].time,
                                        style: TextStyle(
                                            color: Colors.black54,
                                            fontSize: 8.0),
                                      )
                                    ],
                                  ))))
                    ],
                  )),
            );
          },
        ),
      ),
    );
  }
}

</code></pre>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#hybrid%E7%AE%80%E4%BB%8B">Hybridç®€ä»‹</a>
<ul>
<li><a href="#h5-%E5%8E%9F%E7%94%9F">H5 + åŸç”Ÿ</a></li>
<li><a href="#js%E5%BC%80%E5%8F%91-%E5%8E%9F%E7%94%9F">JSå¼€å‘ + åŸç”Ÿ</a></li>
<li><a href="#%E8%87%AA%E7%A0%94gui-%E5%8E%9F%E7%94%9F">è‡ªç ”GUI + åŸç”Ÿ</a></li>
</ul>
</li>
<li><a href="#flutter%E7%99%BB%E5%9C%BA">Flutterç™»åœº</a></li>
<li><a href="#flutter%E6%80%9D%E6%83%B3">Flutteræ€æƒ³</a>
<ul>
<li><a href="#%E7%BB%84%E5%90%88-%E9%9B%86%E6%88%90">ç»„åˆ &gt; é›†æˆ</a></li>
<li><a href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B">å“åº”å¼ç¼–ç¨‹</a></li>
</ul>
</li>
<li><a href="#flutter%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86">Flutteræ ¸å¿ƒåŸç†</a>
<ul>
<li><a href="#%E6%A1%86%E6%9E%B6%E5%88%86%E5%B1%82">æ¡†æ¶åˆ†å±‚</a></li>
<li><a href="#%E6%B8%B2%E6%9F%93%E6%B5%81%E7%A8%8B">æ¸²æŸ“æµç¨‹</a></li>
<li><a href="#%E4%B8%89%E6%A3%B5%E7%A5%9E%E6%A0%91">ä¸‰æ£µç¥æ ‘</a>
<ul>
<li><a href="#%E7%AC%AC%E4%B8%80%E9%A2%97widget">ç¬¬ä¸€é¢—WidgetğŸŒ²</a></li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E9%A2%97element">ç¬¬äºŒé¢—ElementğŸŒ²</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E9%A2%97renderobject">ç¬¬ä¸‰é¢—RenderObjectğŸŒ²</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#widget-%E7%A7%8D%E7%B1%BB">Widget ç§ç±»</a>
<ul>
<li><a href="#stateless-widget">Stateless Widget</a></li>
<li><a href="#statefulwidget">StatefulWidget</a></li>
</ul>
</li>
<li><a href="#%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86">ä¾èµ–ç®¡ç†</a></li>
<li><a href="#%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86">èµ„æºç®¡ç†</a></li>
<li><a href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7">å¼€å‘å·¥å…·</a>
<ul>
<li><a href="#ide%E6%8F%92%E4%BB%B6">IDEæ’ä»¶</a></li>
<li><a href="#code%E6%89%93%E5%BC%80">Codeæ‰“å¼€</a></li>
<li><a href="#%E4%B8%80%E4%BA%9B%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E5%B7%A5%E5%85%B7">ä¸€äº›æœ‰æ„æ€çš„å·¥å…·</a>
<ul>
<li><a href="#select-widget-mode">Select Widget Mode</a></li>
<li><a href="#refresh-widget-info">Refresh Widget Info</a></li>
<li><a href="#show-performance-overlay">Show Performance Overlay</a></li>
<li><a href="#toggle-platform">Toggle Platform</a></li>
<li><a href="#show-debug-paint">Show Debug Paint</a></li>
<li><a href="#show-paint-baselines">Show Paint Baselines</a></li>
<li><a href="#debugpaintpointersenabled">debugPaintPointersEnabled</a></li>
<li><a href="#debugpaintlayerbordersenabled">debugPaintLayerBordersEnabled</a></li>
<li><a href="#debugrepaintrainbowenabled">debugRepaintRainbowEnabled</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%BC%80%E6%BA%90%E5%BA%93%E6%94%AF%E6%8C%81">å¼€æºåº“æ”¯æŒ</a></li>
<li><a href="#%E6%80%BB%E7%BB%93-2">æ€»ç»“</a></li>
<li><a href="#demo-%E6%96%B0%E9%97%BB%E5%AE%A2%E6%88%B7%E7%AB%AF">DEMO æ–°é—»å®¢æˆ·ç«¯</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://songhanghang.github.io/post/redcord-lian-jie-ni-wo">
              <h3 class="post-title">
                Redcord è¿æ¥ä½ æˆ‘
              </h3>
            </a>
          </div>
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '8f78ac631199b9967f3a',
    clientSecret: '42ce86c64dc5a3e7133c2c15ac50fd947c0210ba',
    repo: 'songhanghang.github.io',
    owner: 'songhanghang',
    admin: ['songhanghang'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://songhanghang.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      console.log('section.offsetHeight', section.offsetHeight);
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
